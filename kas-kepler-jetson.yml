header:
  version: 14

machine: kepler-ecg-v1
distro: kepler-jetson
target: swupdate-image-tegra

defaults:
  repos:
    branch: scarthgap

repos:
  meta-kepler-jetson:
    path: meta-kepler-jetson

  meta-tegra:
    url: https://github.com/OE4T/meta-tegra

  meta-tegra-community:
    url: https://github.com/OE4T/meta-tegra-community

  meta-virtualization:
    url: https://git.yoctoproject.org/meta-virtualization

  meta-openembedded:
    url: https://git.openembedded.org/meta-openembedded
    layers:
      meta-filesystems:
      meta-networking:
      meta-python:
      meta-oe:

  poky:
    url: https://git.yoctoproject.org/poky
    layers:
      meta:

  meta-swupdate:
    url: https://github.com/sbabic/meta-swupdate

local_conf_header:
    swupdate-tegra: |
        IMAGE_INSTALL:append = " swupdate swupdate-ipc"
        IMAGE_FSTYPES:append = " tar.gz"
        SWUPDATE_CORE_IMAGE_NAME = "kepler-jetson-odc-dev"
    minimize-image: |
        NO_RECOMMENDATIONS = "1"
    build-info: |
        INHERIT += "image-buildinfo"
        IMAGE_BUILDINFO_VARS:append = " DATETIME DISTRO_NAME IMAGE_BASENAME MACHINE TUNE_PKGARCH"
        IMAGE_BUILDINFO_VARS:append = " MACHINE_FEATURES DISTRO_FEATURES COMMON_FEATURES IMAGE_FEATURES"
        IMAGE_BUILDINFO_VARS:append = " TUNE_FEATURES TARGET_FPU"
    rm-work: |
        INHERIT += "rm_work"
        RM_WORK_EXCLUDE += "libgcc-initial libgcc"
